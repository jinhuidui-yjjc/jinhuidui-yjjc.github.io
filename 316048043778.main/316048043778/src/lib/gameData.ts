// 游戏数据模型
export type ProcuratorialType = 'criminal' | 'civil' | 'administrative' | 'publicInterest' | 'juvenile';

export interface CaseOption {
  text: string;
  hint: string;
  score: number;
}

export interface GameCase {
  number: number;
  title: string;
  content: string;
  options: CaseOption[];
  type: ProcuratorialType;
}

// 模拟案件数据
export const cases: GameCase[] = [
  {
    number: 1,
    title: "盗窃案审查逮捕",
    content: "早上8点，你收到一起盗窃案的审查逮捕材料。犯罪嫌疑人张某在超市盗窃了价值2000元的商品，被当场抓获。经审查，张某是一名刚毕业的大学生，无犯罪前科，被盗商品已全部追回。",
    type: 'criminal',
    options: [
      {
        text: "不批准逮捕，张某系初犯、偶犯，主观恶性较小",
        hint: "完全正确！根据宽严相济刑事政策，对于初犯、偶犯且情节较轻的犯罪嫌疑人，可以依法不批准逮捕。",
        score: 10
      },
      {
        text: "批准逮捕，因为盗窃金额已达到追诉标准",
        hint: "不完全正确。虽然盗窃金额已达追诉标准，但还需综合考虑犯罪情节、社会危害性等因素。",
        score: 5
      },
      {
        text: "退回公安机关补充侦查，要求补充社会危险性证据",
        hint: "不完全错误。虽然案件事实清楚，但对社会危险性评估可以进一步完善。",
        score: 2
      },
      {
        text: "建议公安机关撤销案件",
        hint: "完全错误。本案已构成犯罪，不符合撤销案件的条件。",
        score: 0
      }
    ]
  },
  {
    number: 2,
    title: "民事诉讼监督申请",
    content: "上午10点，一位老人来到检察院，申请对一起民事判决进行监督。老人称其在房屋买卖纠纷中败诉，但有新证据证明对方存在欺诈行为。",
    type: 'civil',
    options: [
      {
        text: "告知老人应先向法院申请再审，如法院驳回再审申请或逾期未作出裁定，再来申请检察监督",
        hint: "完全正确！根据民事诉讼法规定，当事人申请检察监督前应当先向人民法院申请再审。",
        score: 10
      },
      {
        text: "接收申请材料并告知老人需要补充法院裁判文书等材料",
        hint: "不完全正确。虽然接收了材料，但未明确告知申请监督的前置程序。",
        score: 5
      },
      {
        text: "直接受理申请并启动监督程序，因为老人年龄较大，应给予特殊照顾",
        hint: "不完全错误。虽然出发点是好的，但违反了法定程序要求。",
        score: 2
      },
      {
        text: "以超过申请期限为由不予受理",
        hint: "完全错误。未了解具体情况就做出判断，可能损害当事人的合法权益。",
        score: 0
      }
    ]
  },
  {
    number: 3,
    title: "未成年人犯罪案件",
    content: "下午1点，你收到一起未成年人犯罪案件。15岁的李某因琐事与同学发生争执，将对方打成轻伤。经调查，李某平时表现良好，此次系一时冲动，其监护人表示愿意积极赔偿并进行管教。",
    type: 'juvenile',
    options: [
      {
        text: "对李某作出附条件不起诉决定，设定6个月的考验期",
        hint: "完全正确！对于涉嫌犯罪但情节较轻的未成年人，可以依法作出附条件不起诉决定，给予其改过自新的机会。",
        score: 10
      },
      {
        text: "提起公诉，但建议法院适用缓刑",
        hint: "不完全正确。虽然考虑到了从轻处罚，但没有充分体现对未成年人教育为主、惩罚为辅的原则。",
        score: 5
      },
      {
        text: "建议公安机关对李某进行治安处罚",
        hint: "不完全错误。虽然李某已构成犯罪，但考虑到其未成年身份，可以在法律允许的范围内灵活处理。",
        score: 2
      },
      {
        text: "依法提起公诉，要求法院从重处罚",
        hint: "完全错误。违反了对未成年人犯罪教育为主、惩罚为辅的原则。",
        score: 0
      }
    ]
  },
  {
    number: 4,
    title: "环境污染公益诉讼线索",
    content: "下午3点，你接到群众举报，某化工厂偷偷排放污水，污染了附近河流。经初步调查，情况属实，但尚未造成严重后果。",
    type: 'publicInterest',
    options: [
      {
        text: "向环保部门发出检察建议，督促其依法履职，同时开展调查取证工作",
        hint: "完全正确！对于行政机关不作为的情况，可以先发出检察建议，督促其依法履职。",
        score: 10
      },
      {
        text: "直接立案开展公益诉讼调查",
        hint: "不完全正确。根据法律规定，提起公益诉讼前应当先履行诉前程序，督促行政机关履职。",
        score: 5
      },
      {
        text: "联合环保部门共同开展检查",
        hint: "不完全错误。虽然可以协作，但不能替代法律规定的监督程序。",
        score: 2
      },
      {
        text: "告知群众向环保部门举报",
        hint: "完全错误。检察机关作为法律监督机关，对环境公益损害问题负有监督职责。",
        score: 0
      }
    ]
  },
  {
    number: 5,
    title: "刑事申诉案件",
    content: "晚上8点，你收到一起刑事申诉案件。申诉人王某因抢劫罪被判处有期徒刑5年，他声称自己是被冤枉的，有新的证据证明其不在场。",
    type: 'criminal',
    options: [
      {
        text: "决定对案件进行复查，调阅案卷材料并核实新证据",
        hint: "完全正确！对于有新证据可能影响定罪量刑的申诉案件，应当进行复查。",
        score: 10
      },
      {
        text: "要求原审法院对新证据进行审查并反馈意见",
        hint: "不完全正确。虽然可以要求法院协助，但检察机关应当亲自进行审查。",
        score: 5
      },
      {
        text: "告知申诉人向原审法院申请再审",
        hint: "不完全错误。虽然申诉人也可以向法院申请再审，但检察机关也有监督职责。",
        score: 2
      },
      {
        text: "以申诉理由不成立为由驳回申诉",
        hint: "完全错误。未对新证据进行审查就驳回申诉，可能导致冤案。",
        score: 0
      }
    ]
  },
  {
    number: 6,
    title: "行政诉讼监督案件",
    content: "上午9点，你收到一起行政诉讼监督申请。申请人认为某行政机关作出的行政处罚决定认定事实不清，适用法律错误，但法院判决维持了该处罚决定。",
    type: 'administrative',
    options: [
      {
        text: "受理申请，调阅行政诉讼案卷，对行政行为的合法性进行全面审查",
        hint: "完全正确！检察机关应当对行政诉讼案件进行全面监督，确保行政机关依法行政。",
        score: 10
      },
      {
        text: "仅审查法院的审判活动是否合法",
        hint: "不完全正确。检察机关不仅要监督审判活动，还要监督行政行为的合法性。",
        score: 5
      },
      {
        text: "建议申请人向上一级法院申请再审",
        hint: "不完全错误。虽然申请人可以申请再审，但检察机关也应当履行监督职责。",
        score: 2
      },
      {
        text: "以不属于监督范围为由不予受理",
        hint: "完全错误。行政诉讼监督是检察机关的法定职责。",
        score: 0
      }
    ]
  },
  {
    number: 7,
    title: "虚假诉讼监督线索",
    content: "下午2点，你收到一条虚假诉讼线索，反映某公司通过虚构债务纠纷提起诉讼，意图逃避债务。",
    type: 'civil',
    options: [
      {
        text: "立案调查，收集证据，如属实则向法院提出再审检察建议",
        hint: "完全正确！对于虚假诉讼，检察机关应当依法监督，维护司法公正。",
        score: 10
      },
      {
        text: "将线索移送公安机关处理",
        hint: "不完全正确。虽然虚假诉讼可能构成犯罪，但检察机关也应当先履行诉讼监督职责。",
        score: 5
      },
      {
        text: "建议当事人自行向法院申请撤销诉讼",
        hint: "不完全错误。虽然当事人可以申请撤诉，但检察机关应当主动监督。",
        score: 2
      },
      {
        text: "以没有直接证据为由不予受理",
        hint: "完全错误。检察机关应当对线索进行调查核实，而不是仅依赖现有证据。",
        score: 0
      }
    ]
  },
  {
    number: 8,
    title: "未成年人被害人保护",
    content: "上午11点，你收到一起性侵害未成年人案件。被害人是一名12岁的女童，案件办理过程中需要对其进行询问。",
    type: 'juvenile',
    options: [
      {
        text: "在未成年人检察工作室进行询问，由女性检察人员进行，并通知法定代理人到场",
        hint: "完全正确！询问未成年被害人应当采取适当方式，保护其身心健康。",
        score: 10
      },
      {
        text: "在检察院办公室进行询问，由主办检察官负责",
        hint: "不完全正确。没有充分考虑到未成年人的特殊心理需求和保护要求。",
        score: 5
      },
      {
        text: "建议公安机关对被害人进行询问",
        hint: "不完全错误。虽然公安机关可以询问，但检察机关也应当履行对未成年人的特殊保护职责。",
        score: 2
      },
      {
        text: "多次询问被害人以获取详细陈述",
        hint: "完全错误。反复询问可能对未成年被害人造成二次伤害。",
        score: 0
      }
    ]
  },
  {
    number: 9,
    title: "食品药品安全公益诉讼",
    content: "下午4点，你接到群众举报，某餐馆使用过期食材制作食品，存在严重安全隐患。",
    type: 'publicInterest',
    options: [
      {
        text: "联合市场监管部门开展检查，如属实则发出检察建议督促依法处理",
        hint: "完全正确！对于食品药品安全问题，检察机关应当通过公益诉讼等方式进行监督。",
        score: 10
      },
      {
        text: "直接向法院提起公益诉讼",
        hint: "不完全正确。根据法律规定，提起公益诉讼前应当先履行诉前程序。",
        score: 5
      },
      {
        text: "将线索移送市场监管部门处理",
        hint: "不完全错误。虽然市场监管部门有监管职责，但检察机关也应当履行法律监督职责。",
        score: 2
      },
      {
        text: "告知举报人向消费者协会投诉",
        hint: "完全错误。检察机关作为法律监督机关，对食品药品安全领域的公益损害问题负有监督职责。",
        score: 0
      }
    ]
  },
  {
    number: 10,
    title: "羁押必要性审查",
    content: "晚上7点，你收到一起羁押必要性审查申请。犯罪嫌疑人赵某因涉嫌诈骗罪被逮捕，现已被羁押3个月，案件正在审查起诉阶段。经审查，赵某认罪认罚，积极退赃，且系初犯。",
    type: 'criminal',
    options: [
      {
        text: "启动羁押必要性审查，认为没有继续羁押的必要，建议办案机关变更强制措施为取保候审",
        hint: "完全正确！对于认罪认罚、积极退赃且无社会危险性的犯罪嫌疑人，可以建议变更强制措施。",
        score: 10
      },
      {
        text: "维持原逮捕决定，因为案件尚未审结",
        hint: "不完全正确。羁押必要性审查应当根据案件进展和犯罪嫌疑人的具体情况进行动态评估。",
        score: 5
      },
      {
        text: "要求公安机关提供继续羁押的理由",
        hint: "不完全错误。虽然可以要求公安机关说明理由，但检察机关应当主动进行审查。",
        score: 2
      },
      {
        text: "以案件正在办理中为由不予受理审查申请",
        hint: "完全错误。羁押必要性审查是检察机关的法定职责，应当依法受理并进行审查。",
        score: 0
      }
    ]
  }
];

// 技能类型定义
export interface Skill {
  name: string;
  type: ProcuratorialType;
  value: number;
}

// 初始化技能数据
export const initialSkills: Skill[] = [
  { name: "刑事检察", type: 'criminal', value: 0 },
  { name: "民事检察", type: 'civil', value: 0 },
  { name: "行政检察", type: 'administrative', value: 0 },
  { name: "公益诉讼", type: 'publicInterest', value: 0 },
  { name: "未成年人检察", type: 'juvenile', value: 0 }
];

// 打乱数组顺序的工具函数
export const shuffleArray = <T,>(array: T[]): T[] => {
  const newArray = [...array];
  for (let i = newArray.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
  }
  return newArray;
};